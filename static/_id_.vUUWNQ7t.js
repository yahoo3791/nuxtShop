import{E as B,a as T,v as V}from"./el-loading.18zYIJK3.js";import{_ as O,a as D}from"./FrontFooter.11OVHZyK.js";import{E as q,a as z}from"./el-breadcrumb.ETCeicgR.js";import{k as I,b as S,u as W}from"./entry.2VKWY6l_.js";import{j as A,a as h,G,b as H,q as l,I as r,a0 as N,M as i,_ as J,u as f,J as e,C as v,N as y,L as m,ac as Q,Q as X,R as L,U as Y,a1 as Z,ad as ee}from"./swiper-vue.D7OQEzaL.js";import{u as te}from"./fetch.pTmHjBRq.js";import"./aria.ClGo7ZJR.js";import"./_plugin-vue_export-helper.x3n3nnut.js";const se=""+new URL("productBanner.A4wWc5nM.png",import.meta.url).href,ae=e("a",{class:"accesskey position-absolute no-print start-0",href:"#",title:"主要內容區",accesskey:"C",id:"content"},":::",-1),oe={class:"container"},ce={class:"row"},ne={class:"col-12"},le=e("a",{class:"accesskey position-absolute no-print start-0",href:"#",title:"主要內容區",accesskey:"C",id:"content"},":::",-1),re=e("a",{href:"/",title:"首頁"},"首頁",-1),ie=e("a",{href:"/products/all",title:"商品"},"商品",-1),de={class:"col-12"},ue=e("img",{src:se,class:"w-100 productBanner",alt:""},null,-1),_e={class:"d-flex align-items-center justify-content-between"},pe=e("i",{class:"bi bi-search d-inline-block pe-2 fs-4"},null,-1),he={for:"search"},me={class:"ps-3 px-md-0 d-flex flex-wrap justify-content-end align-items-center my-3"},be={for:"sort",class:"pe-2 pe-md-0 pb-md-1"},fe={class:"d-inline-block",style:{"max-width":"300px"}},ve=e("option",{selected:"selected",disabled:"disabled",value:""}," 選擇顯示方法 ",-1),ke=e("option",{value:"熱銷商品",title:"熱銷商品"},"熱銷商品",-1),ge=e("option",{value:"價格排序低到高",title:"價格排序低到高"}," 價格排序低到高 ",-1),ye=e("option",{value:"價格排序高到低",title:"價格排序高到低"}," 價格排序高到低 ",-1),we=[ve,ke,ge,ye],xe={class:"row justify-content-between"},Ce=["title","onClick","onKeydown"],Ee=["src","alt"],$e={class:"card-body"},je={class:"card-title"},Be={key:0,class:"badge bg-danger"},Ne={key:1,class:"badge bg-dark opacity-50"},Le={class:"card-text"},Me=["onClick","onKeydown"],Re={key:1,href:"javascript:;",class:"btn btn-dark opacity-50",title:"已售完"},ze=A({__name:"[id]",setup(Ue){const M=I(),w=S(),x=w.public.api,C=w.public.path,k=h();te(`${x}api/${C}/products/all`,"$5POrt3WEnK").then(a=>{k.value=a.data.value.products,E()});const d=h("全部"),E=()=>{switch(M.params.id){case"cake":d.value="蛋糕",_("蛋糕");break;case"chocolate":d.value="巧克力",_("巧克力");break;case"brownie":d.value="布朗尼",_("布朗尼");break;case"cupcake":d.value="杯子蛋糕",_("杯子蛋糕");break;case"all":d.value="全部商品",_("");break;default:return}},o=h(),_=a=>{o.value=k.value.filter(s=>s.category.match(a))},b=h(!0),$=(a,s)=>{if(s.key=="Enter"||s.type=="click"){b.value=!1;const c={product_id:a.id,qty:1};$fetch(`${x}api/${C}/cart`,{method:"post",body:{data:c}}).then(p=>{b.value=!0,B({message:p.message,type:"success"})}).catch(p=>{b.value=!0,B({message:p.message,type:"error"})})}},j=(a,s)=>{(s.key=="Enter"||s.type=="click")&&W().push({path:`/products/detail/${a}`})},R=a=>{switch(a.target.value){case"熱銷商品":o.value=o.value.sort((s,c)=>s.num-c.num);break;case"價格排序低到高":o.value=o.value.sort((s,c)=>s.price-c.price);break;case"價格排序高到低":o.value=o.value.sort((s,c)=>c.price-s.price);break;default:return}},U=()=>{o.value=k.value.filter(a=>a.title.match(u.value)),u.value==""&&E()},u=h("");return G(()=>{}),H(u,()=>{U()}),(a,s)=>{const c=T,p=O,g=q,F=z,K=D,P=V;return l(),r(L,null,[N(i(c,{class:J(["position-fixed w-100 h-100 bg-dark opacity-25",{"d-none":f(b)}]),style:{"z-index":"10000"}},null,8,["class"]),[[P,!0]]),i(p),ae,e("div",oe,[e("div",ce,[e("div",ne,[le,i(F,{separator:"/"},{default:v(()=>[i(g,null,{default:v(()=>[re]),_:1}),i(g,null,{default:v(()=>[ie]),_:1}),i(g,null,{default:v(()=>[y(m(f(d)),1)]),_:1})]),_:1})]),e("div",de,[ue,e("div",_e,[e("div",null,[pe,e("label",he,[N(e("input",{type:"text",name:"search",class:"w-100 border-0 bg-dark text-white border-bottom",placeholder:"查詢商品",title:"查詢商品","onUpdate:modelValue":s[0]||(s[0]=t=>X(u)?u.value=t:null)},null,512),[[Q,f(u)]])])]),e("div",me,[e("label",be,[y("顯示方法 "),e("div",fe,[e("select",{name:"sort",id:"sort",class:"bg-dark text-white px-4 py-1 border-0 border-bottom",title:"選擇顯示方法",onChange:s[1]||(s[1]=t=>R(t))},we,32)])])])])])]),e("div",xe,[(l(!0),r(L,null,Y(f(o),t=>(l(),r("div",{class:"col-sm-12 col-md-6 col-lg-4 col-xl-3 mb-5",key:t.id},[e("a",{href:"javascript:;",title:`查看${t.title}`,class:"card text-black text-decoration-none",onClick:n=>j(t.id,n),onKeydown:n=>j(t.id,n)},[e("img",{src:t.imageUrl,class:"card-img-top",alt:t.imageUrl},null,8,Ee),e("div",$e,[e("h5",je,[t.num<=5&&t.num>=1?(l(),r("span",Be,"HOT")):t.num===0?(l(),r("span",Ne,"SOLD OUT")):Z("",!0),y(" "+m(t.title),1)]),e("p",null,m(t.unit)+" "+m(t.price)+"$",1),e("p",Le,m(t.content),1),t.num>=1?(l(),r("a",{key:0,onClick:ee(n=>$(t,n),["stop"]),onKeydown:n=>$(t,n),href:"javascript:;",class:"btn btn-primary",title:"加入購物車"},"加入購物車",40,Me)):(l(),r("a",Re,"已售完"))])],40,Ce)]))),128))])]),i(K)],64)}}});export{ze as default};
